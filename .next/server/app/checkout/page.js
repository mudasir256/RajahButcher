(()=>{var e={};e.id=285,e.ids=[285],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8260:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>d.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>n}),t(6122),t(6541),t(5866);var s=t(3191),l=t(8716),a=t(7922),d=t.n(a),o=t(5231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);t.d(r,i);let n=["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6122)),"/Users/irfanayaz/Desktop/ButcherShop/src/app/checkout/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6541)),"/Users/irfanayaz/Desktop/ButcherShop/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/irfanayaz/Desktop/ButcherShop/src/app/checkout/page.tsx"],m="/checkout/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},8561:(e,r,t)=>{Promise.resolve().then(t.bind(t,1775))},6333:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=(0,t(6557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1775:(e,r,t)=>{"use strict";t.d(r,{default:()=>x});var s=t(326),l=t(7577),a=t(6333),d=t(7636);let o=(0,t(6557).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);var i=t(768),n=t(4001),c=t(434);let m=[{id:"eh1",postcode_prefix:"EH1",zone_name:"Edinburgh City Centre",delivery_fee:3.5,minimum_order:25,free_delivery_over:50},{id:"eh2",postcode_prefix:"EH2",zone_name:"New Town",delivery_fee:3.5,minimum_order:25,free_delivery_over:50},{id:"eh3",postcode_prefix:"EH3",zone_name:"Stockbridge",delivery_fee:4,minimum_order:30,free_delivery_over:60},{id:"eh4",postcode_prefix:"EH4",zone_name:"Cramond",delivery_fee:4.5,minimum_order:35,free_delivery_over:70},{id:"eh5",postcode_prefix:"EH5",zone_name:"Granton",delivery_fee:4,minimum_order:30,free_delivery_over:60},{id:"eh6",postcode_prefix:"EH6",zone_name:"Leith",delivery_fee:3.5,minimum_order:25,free_delivery_over:50},{id:"eh7",postcode_prefix:"EH7",zone_name:"Leith Walk",delivery_fee:3.5,minimum_order:25,free_delivery_over:50}];function x(){let{cart:e,cartTotal:r,clearCart:t}=(0,i.j)(),{user:x}=(0,n.a)(),[u,p]=(0,l.useState)("delivery"),[h,y]=(0,l.useState)(""),[g,b]=(0,l.useState)(null),[f,v]=(0,l.useState)(""),[j,_]=(0,l.useState)(""),[N,w]=(0,l.useState)(x?.email||""),[k,S]=(0,l.useState)(""),[C,P]=(0,l.useState)(""),[E,q]=(0,l.useState)(""),[z,A]=(0,l.useState)("Edinburgh"),[D,F]=(0,l.useState)(""),[H,O]=(0,l.useState)(!1),$=async()=>{v(""),b(null);let e=h.trim().toUpperCase().replace(/\s/g,"").substring(0,3),t=m.find(r=>r.postcode_prefix===e);t?r<t.minimum_order?v(`Minimum order for ${e} is \xa3${t.minimum_order.toFixed(2)}`):b(t):v("Sorry, we don't deliver to this postcode yet")},M="delivery"===u?!g||r>=g.free_delivery_over?0:g.delivery_fee:0,Z=r+M,G=async s=>{if(s.preventDefault(),"delivery"===u&&!g){alert("Please check your postcode for delivery");return}O(!0);let l=`RJ${Date.now()}`,a={order_number:l,user_id:x?.id,customer_name:j,customer_email:N,customer_phone:k,delivery_type:u,delivery_address:"delivery"===u?{line1:C,line2:E,city:z,postcode:h}:null,delivery_postcode:"delivery"===u?h:null,subtotal:r,delivery_fee:M,total:Z,status:"pending",payment_status:"pending",special_instructions:D||null,cart_items:e},d=JSON.parse(localStorage.getItem("orders")||"[]");d.push(a),localStorage.setItem("orders",JSON.stringify(d)),await t(),alert(`Order ${l} placed successfully! We'll contact you shortly.`),window.location.href="/"};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-gradient-to-br from-emerald-600 to-emerald-700 text-white py-12",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)(c.default,{href:"/cart",className:"flex items-center gap-2 text-emerald-100 hover:text-white mb-4 font-medium",children:[s.jsx(a.Z,{className:"w-5 h-5"}),"Back to Cart"]}),s.jsx("h1",{className:"text-4xl font-bold",children:"Checkout"})]})}),s.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("form",{onSubmit:G,children:(0,s.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-200",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Delivery Method"}),(0,s.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>p("delivery"),className:`p-6 rounded-2xl border-2 transition-all text-left ${"delivery"===u?"border-emerald-600 bg-emerald-50":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx(d.Z,{className:`w-8 h-8 mb-3 ${"delivery"===u?"text-emerald-600":"text-gray-400"}`}),s.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:"Delivery"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get it delivered to your door"})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>p("collection"),className:`p-6 rounded-2xl border-2 transition-all text-left ${"collection"===u?"border-emerald-600 bg-emerald-50":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx(o,{className:`w-8 h-8 mb-3 ${"collection"===u?"text-emerald-600":"text-gray-400"}`}),s.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:"Click & Collect"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Pick up from 33 Albert Street"})]})]})]}),"delivery"===u&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-200",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Check Delivery Area"}),(0,s.jsxs)("div",{className:"flex gap-3 mb-4",children:[s.jsx("input",{type:"text",value:h,onChange:e=>y(e.target.value.toUpperCase()),placeholder:"Enter postcode (e.g., EH7)",className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"}),s.jsx("button",{type:"button",onClick:$,className:"px-6 py-3 bg-emerald-600 text-white font-medium rounded-xl hover:bg-emerald-700 transition-colors",children:"Check"})]}),f&&s.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl text-sm text-red-700",children:f}),g&&s.jsx("div",{className:"p-4 bg-emerald-50 border border-emerald-200 rounded-xl",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[s.jsx(d.Z,{className:"w-5 h-5 text-emerald-600 mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsxs)("p",{className:"font-semibold text-emerald-900 mb-1",children:["Delivery available to ",g.zone_name]}),(0,s.jsxs)("p",{className:"text-emerald-700",children:["Delivery fee: \xa3",g.delivery_fee.toFixed(2),r>=g.free_delivery_over&&" (FREE - minimum met!)"]})]})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-200",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Contact Information"}),(0,s.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"sm:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),s.jsx("input",{type:"text",value:j,onChange:e=>_(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:N,onChange:e=>w(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),s.jsx("input",{type:"tel",value:k,onChange:e=>S(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"})]})]})]}),"delivery"===u&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-200",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Delivery Address"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Line 1"}),s.jsx("input",{type:"text",value:C,onChange:e=>P(e.target.value),required:"delivery"===u,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Line 2 (Optional)"}),s.jsx("input",{type:"text",value:E,onChange:e=>q(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),s.jsx("input",{type:"text",value:z,onChange:e=>A(e.target.value),required:"delivery"===u,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-200",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Special Instructions (Optional)"}),s.jsx("textarea",{value:D,onChange:e=>F(e.target.value),rows:4,placeholder:"Any special requests for your order?",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 resize-none"})]})]}),s.jsx("div",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-200 sticky top-24",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Order Summary"}),s.jsx("div",{className:"space-y-3 mb-6 text-sm",children:e.map(e=>(0,s.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,s.jsxs)("span",{className:"flex-1",children:[e.product_name," (",e.selected_weight,") x",e.quantity]}),(0,s.jsxs)("span",{className:"font-semibold text-gray-900",children:["\xa3",e.item_total.toFixed(2)]})]},e.id))}),(0,s.jsxs)("div",{className:"space-y-3 py-4 border-t border-gray-200 mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between text-gray-600",children:[s.jsx("span",{children:"Subtotal"}),(0,s.jsxs)("span",{className:"font-semibold text-gray-900",children:["\xa3",r.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-gray-600",children:[s.jsx("span",{children:"Delivery"}),s.jsx("span",{className:"font-semibold text-gray-900",children:0===M?"FREE":`\xa3${M.toFixed(2)}`})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 mb-6",children:[s.jsx("span",{className:"font-semibold text-gray-900",children:"Total"}),(0,s.jsxs)("span",{className:"font-bold text-2xl text-emerald-600",children:["\xa3",Z.toFixed(2)]})]}),s.jsx("button",{type:"submit",disabled:H||"delivery"===u&&!g,className:"w-full py-4 bg-emerald-600 text-white font-bold rounded-2xl hover:bg-emerald-700 transition-colors shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:H?"Placing Order...":"Place Order"}),s.jsx("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"Payment will be collected upon delivery or collection"})]})})]})})})]})}},6122:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var s=t(9510);let l=(0,t(8570).createProxy)(String.raw`/Users/irfanayaz/Desktop/ButcherShop/src/components/pages/Checkout.tsx#default`);function a(){return s.jsx(l,{})}}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[965,159],()=>t(8260));module.exports=s})();