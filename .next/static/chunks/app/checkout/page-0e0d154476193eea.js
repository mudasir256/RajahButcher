(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{5297:function(e,t,r){Promise.resolve().then(r.bind(r,6982))},2660:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3774:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},6982:function(e,t,r){"use strict";r.d(t,{default:function(){return u}});var a=r(7437),l=r(2265),s=r(2660),i=r(3774);let d=(0,r(9763).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);var n=r(9252),o=r(4362),c=r(5981);let m=[{id:"eh1",postcode_prefix:"EH1",zone_name:"Edinburgh City Centre",delivery_fee:3.5,minimum_order:25,free_delivery_over:50},{id:"eh2",postcode_prefix:"EH2",zone_name:"New Town",delivery_fee:3.5,minimum_order:25,free_delivery_over:50},{id:"eh3",postcode_prefix:"EH3",zone_name:"Stockbridge",delivery_fee:4,minimum_order:30,free_delivery_over:60},{id:"eh4",postcode_prefix:"EH4",zone_name:"Cramond",delivery_fee:4.5,minimum_order:35,free_delivery_over:70},{id:"eh5",postcode_prefix:"EH5",zone_name:"Granton",delivery_fee:4,minimum_order:30,free_delivery_over:60},{id:"eh6",postcode_prefix:"EH6",zone_name:"Leith",delivery_fee:3.5,minimum_order:25,free_delivery_over:50},{id:"eh7",postcode_prefix:"EH7",zone_name:"Leith Walk",delivery_fee:3.5,minimum_order:25,free_delivery_over:50}];function u(){let{cart:e,cartTotal:t,clearCart:r}=(0,n.j)(),{user:u}=(0,o.a)(),[x,y]=(0,l.useState)("delivery"),[h,g]=(0,l.useState)(""),[f,p]=(0,l.useState)(null),[b,v]=(0,l.useState)(""),[_,j]=(0,l.useState)(""),[N,w]=(0,l.useState)((null==u?void 0:u.email)||""),[S,k]=(0,l.useState)(""),[C,E]=(0,l.useState)(""),[O,I]=(0,l.useState)(""),[q,D]=(0,l.useState)("Edinburgh"),[P,A]=(0,l.useState)(""),[z,F]=(0,l.useState)(!1);(0,l.useEffect)(()=>{0===e.length&&(window.location.href="/cart")},[e]);let J=async()=>{v(""),p(null);let e=h.trim().toUpperCase().replace(/\s/g,"").substring(0,3),r=m.find(t=>t.postcode_prefix===e);r?t<r.minimum_order?v("Minimum order for ".concat(e," is \xa3").concat(r.minimum_order.toFixed(2))):p(r):v("Sorry, we don't deliver to this postcode yet")},Z="delivery"===x?!f||t>=f.free_delivery_over?0:f.delivery_fee:0,H=t+Z,M=async a=>{if(a.preventDefault(),"delivery"===x&&!f){alert("Please check your postcode for delivery");return}F(!0);let l="RJ".concat(Date.now()),s={order_number:l,user_id:null==u?void 0:u.id,customer_name:_,customer_email:N,customer_phone:S,delivery_type:x,delivery_address:"delivery"===x?{line1:C,line2:O,city:q,postcode:h}:null,delivery_postcode:"delivery"===x?h:null,subtotal:t,delivery_fee:Z,total:H,status:"pending",payment_status:"pending",special_instructions:P||null,cart_items:e},i=JSON.parse(localStorage.getItem("orders")||"[]");i.push(s),localStorage.setItem("orders",JSON.stringify(i)),await r(),alert("Order ".concat(l," placed successfully! We'll contact you shortly.")),window.location.href="/"};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-emerald-600 to-emerald-700 text-white py-12",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)(c.default,{href:"/cart",className:"flex items-center gap-2 text-emerald-100 hover:text-white mb-4 font-medium",children:[(0,a.jsx)(s.Z,{className:"w-5 h-5"}),"Back to Cart"]}),(0,a.jsx)("h1",{className:"text-4xl font-bold",children:"Checkout"})]})}),(0,a.jsx)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsx)("form",{onSubmit:M,children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Delivery Method"}),(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>y("delivery"),className:"p-6 rounded-2xl border-2 transition-all text-left ".concat("delivery"===x?"border-emerald-600 bg-emerald-50":"border-gray-200 hover:border-gray-300"),children:[(0,a.jsx)(i.Z,{className:"w-8 h-8 mb-3 ".concat("delivery"===x?"text-emerald-600":"text-gray-400")}),(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-1",children:"Delivery"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Get it delivered to your door"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>y("collection"),className:"p-6 rounded-2xl border-2 transition-all text-left ".concat("collection"===x?"border-emerald-600 bg-emerald-50":"border-gray-200 hover:border-gray-300"),children:[(0,a.jsx)(d,{className:"w-8 h-8 mb-3 ".concat("collection"===x?"text-emerald-600":"text-gray-400")}),(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-1",children:"Click & Collect"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Pick up from 33 Albert Street"})]})]})]}),"delivery"===x&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Check Delivery Area"}),(0,a.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,a.jsx)("input",{type:"text",value:h,onChange:e=>g(e.target.value.toUpperCase()),placeholder:"Enter postcode (e.g., EH7)",className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"}),(0,a.jsx)("button",{type:"button",onClick:J,className:"px-6 py-3 bg-emerald-600 text-white font-medium rounded-xl hover:bg-emerald-700 transition-colors",children:"Check"})]}),b&&(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl text-sm text-red-700",children:b}),f&&(0,a.jsx)("div",{className:"p-4 bg-emerald-50 border border-emerald-200 rounded-xl",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5 text-emerald-600 mt-0.5"}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("p",{className:"font-semibold text-emerald-900 mb-1",children:["Delivery available to ",f.zone_name]}),(0,a.jsxs)("p",{className:"text-emerald-700",children:["Delivery fee: \xa3",f.delivery_fee.toFixed(2),t>=f.free_delivery_over&&" (FREE - minimum met!)"]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Contact Information"}),(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,a.jsx)("input",{type:"text",value:_,onChange:e=>j(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,a.jsx)("input",{type:"email",value:N,onChange:e=>w(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),(0,a.jsx)("input",{type:"tel",value:S,onChange:e=>k(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"})]})]})]}),"delivery"===x&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Delivery Address"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Line 1"}),(0,a.jsx)("input",{type:"text",value:C,onChange:e=>E(e.target.value),required:"delivery"===x,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Line 2 (Optional)"}),(0,a.jsx)("input",{type:"text",value:O,onChange:e=>I(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),(0,a.jsx)("input",{type:"text",value:q,onChange:e=>D(e.target.value),required:"delivery"===x,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Special Instructions (Optional)"}),(0,a.jsx)("textarea",{value:P,onChange:e=>A(e.target.value),rows:4,placeholder:"Any special requests for your order?",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 resize-none"})]})]}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-200 sticky top-24",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Order Summary"}),(0,a.jsx)("div",{className:"space-y-3 mb-6 text-sm",children:e.map(e=>(0,a.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,a.jsxs)("span",{className:"flex-1",children:[e.product_name," (",e.selected_weight,") x",e.quantity]}),(0,a.jsxs)("span",{className:"font-semibold text-gray-900",children:["\xa3",e.item_total.toFixed(2)]})]},e.id))}),(0,a.jsxs)("div",{className:"space-y-3 py-4 border-t border-gray-200 mb-4",children:[(0,a.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,a.jsx)("span",{children:"Subtotal"}),(0,a.jsxs)("span",{className:"font-semibold text-gray-900",children:["\xa3",t.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,a.jsx)("span",{children:"Delivery"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:0===Z?"FREE":"\xa3".concat(Z.toFixed(2))})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 mb-6",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:"Total"}),(0,a.jsxs)("span",{className:"font-bold text-2xl text-emerald-600",children:["\xa3",H.toFixed(2)]})]}),(0,a.jsx)("button",{type:"submit",disabled:z||"delivery"===x&&!f,className:"w-full py-4 bg-emerald-600 text-white font-bold rounded-2xl hover:bg-emerald-700 transition-colors shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:z?"Placing Order...":"Place Order"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"Payment will be collected upon delivery or collection"})]})})]})})})]})}},4362:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return i},a:function(){return d}});var a=r(7437),l=r(2265);let s=(0,l.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,l.useState)(null),[d,n]=(0,l.useState)(null),[o,c]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=localStorage.getItem("dummy-user");if(e){let t=JSON.parse(e);i(t.user),n(t.session)}c(!1)},[]);let m=async(e,t)=>({error:null}),u=async(e,t)=>{if("smudasir256@gmail.com"===e&&"12345678"===t){let e={id:"dummy-user-id",email:"smudasir256@gmail.com",user_metadata:{},app_metadata:{},aud:"authenticated",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),email_confirmed_at:new Date().toISOString(),phone:"",confirmed_at:new Date().toISOString(),last_sign_in_at:new Date().toISOString(),role:"authenticated",factors:[],identities:[],is_anonymous:!1},t={access_token:"dummy-access-token",refresh_token:"dummy-refresh-token",expires_in:3600,expires_at:Math.floor(Date.now()/1e3)+3600,token_type:"bearer",user:e};return i(e),n(t),localStorage.setItem("dummy-user",JSON.stringify({user:e,session:t})),{error:null}}return{error:{message:"Invalid credentials"}}},x=async()=>{i(null),n(null),localStorage.removeItem("dummy-user"),localStorage.removeItem("dummy-cart")};return(0,a.jsx)(s.Provider,{value:{user:r,session:d,signUp:m,signIn:u,signOut:x,loading:o},children:t})}function d(){let e=(0,l.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9252:function(e,t,r){"use strict";r.d(t,{CartProvider:function(){return d},j:function(){return n}});var a=r(7437),l=r(2265),s=r(4362);let i=(0,l.createContext)(void 0);function d(e){let{children:t}=e,[r,d]=(0,l.useState)([]),{user:n}=(0,s.a)(),o=(e,t,r)=>parseFloat(t.replace("kg","").replace("g",""))/(t.includes("kg")?1:1e3)*e*r,c=(0,l.useCallback)(async()=>{if(!n){d([]);return}let e=localStorage.getItem("dummy-cart");e?d(JSON.parse(e)):d([])},[n]);(0,l.useEffect)(()=>{c()},[c]);let m=async e=>{if(!n){alert("Please sign in to add items to cart");return}let t=r.find(t=>t.product_id===e.product_id&&t.selected_weight===e.selected_weight&&t.selected_cut===e.selected_cut&&t.selected_marinade===e.selected_marinade);if(t){let a=r.map(r=>r.id===t.id?{...r,quantity:r.quantity+e.quantity,item_total:o(r.price_per_kg,r.selected_weight,r.quantity+e.quantity)}:r);d(a),localStorage.setItem("dummy-cart",JSON.stringify(a))}else{let t=[...r,{id:"dummy-".concat(Date.now(),"-").concat(Math.random()),...e,item_total:o(e.price_per_kg,e.selected_weight,e.quantity)}];d(t),localStorage.setItem("dummy-cart",JSON.stringify(t))}},u=async(e,t)=>{if(t<=0){await x(e);return}let a=r.map(r=>r.id===e?{...r,quantity:t,item_total:o(r.price_per_kg,r.selected_weight,t)}:r);d(a),localStorage.setItem("dummy-cart",JSON.stringify(a))},x=async e=>{let t=r.filter(t=>t.id!==e);d(t),localStorage.setItem("dummy-cart",JSON.stringify(t))},y=async()=>{n&&(d([]),localStorage.removeItem("dummy-cart"))},h=r.reduce((e,t)=>e+t.quantity,0),g=r.reduce((e,t)=>e+t.item_total,0);return(0,a.jsx)(i.Provider,{value:{cart:r,cartCount:h,cartTotal:g,addToCart:m,updateQuantity:u,removeFromCart:x,clearCart:y,refreshCart:c},children:t})}function n(){let e=(0,l.useContext)(i);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}}},function(e){e.O(0,[451,971,117,744],function(){return e(e.s=5297)}),_N_E=e.O()}]);